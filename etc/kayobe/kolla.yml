---
# Kayobe Kolla configuration.

###############################################################################
# Kolla installation.

# Type of Kolla control installation. One of 'binary' or 'source'.
#kolla_ctl_install_type: source

# Path to directory for kolla source code checkout.
#kolla_source_path:

# URL of Kolla source code repository if type is 'source'.
#kolla_source_url: https://github.com/RSE-Cambridge/kolla

# Version (branch, tag, etc.) of Kolla source code repository if type is
# 'source'.
#kolla_source_version: origin/cumulus/queens

# Path to virtualenv in which to install kolla.
#kolla_venv:

# Path in which to generate kolla configuration.
#kolla_build_config_path:

###############################################################################
# Kolla-ansible installation.

# Type of Kolla-ansible control installation. One of 'binary' or 'source'.
kolla_ansible_ctl_install_type: source

# Path to directory for kolla-ansible source code checkout.
#kolla_ansible_source_path:

# URL of Kolla Ansible source code repository if type is 'source'.
kolla_ansible_source_url: https://github.com/RSE-Cambridge/kolla-ansible

# Version (branch, tag, etc.) of Kolla Ansible source code repository if type
# is 'source'.
kolla_ansible_source_version: origin/cumulus/rocky

# Path to virtualenv in which to install kolla-ansible.
#kolla_ansible_venv:

# Extra requirements to install inside the kolla-ansible virtualenv.
#kolla_ansible_venv_extra_requirements:

# Path to Kolla-ansible configuration directory.
#kolla_config_path:

# Path to Kolla-ansible node custom configuration directory.
#kolla_node_custom_config_path:

###############################################################################
# Kolla configuration.

# Kolla base container image distribution.
#kolla_base_distro:

# Kolla installation type: binary or source.
#kolla_install_type:

# URL of docker registry to use for Kolla images.
kolla_docker_registry: "{{ docker_registry }}"

# Docker namespace to use for Kolla images.
kolla_docker_namespace: rse-cambridge

# Username to use to access a docker registry.
#kolla_docker_registry_username:

# Password to use to access a docker registry.
#kolla_docker_registry_password:

# Kolla OpenStack release version. This should be a Docker image tag.
#kolla_openstack_release:

# Dict mapping names of sources to their definitions for
# kolla_install_type=source. See kolla.common.config for details.
# Example:
# kolla_sources:
#   ironic_base:
#     type: git
#     location: https://github.com/openstack/ironic
#     reference: master
#kolla_sources:

###############################################################################
# Kolla image build configuration.

# Dict mapping Jinja2 block names in kolla's Docker images to their contents.
#kolla_build_blocks:
kolla_build_blocks:
  ironic_inspector_footer: |
    # Install our custom inspector plugins.
    RUN pip install stackhpc-inspector-plugins==1.1.1
  manila_share_footer: |
    # Update the ceph volume client to mimic, due to obsolete mds commands
    RUN cp /usr/lib/python2.7/site-packages/ceph_volume_client.py /usr/lib/python2.7/site-packages/ceph_volume_client.py.old
    RUN curl https://raw.githubusercontent.com/ceph/ceph/mimic/src/pybind/ceph_volume_client.py -o /usr/lib/python2.7/site-packages/ceph_volume_client.py
  magnum_api_footer: |
    RUN pip install -U --no-deps git+https://github.com/RSE-Cambridge/magnum@stable/rocky
  magnum_conductor_footer: |
    RUN pip install -U --no-deps git+https://github.com/RSE-Cambridge/magnum@stable/rocky
  keystone_footer: |
    RUN pip install -U --no-deps git+https://github.com/RSE-Cambridge/keystone@stable/rocky

# Dict mapping image customization variable names to their values.
# Each variable takes the form:
# <image name>_<customization>_<operation>
# Hyphens in the image name are replaced with underscores. The customization is
# most commonly packages. The operation should be one of override, append or
# remove. The value should be a list.
kolla_build_customizations:
  ironic_inspector_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'       
  magnum_base_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'
  keystone_base_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'
    # Allow use of OpenID connecto for federation
    - 'mod_auth_openidc'
  neutron_server_packages_append:
    # Allow custom packages to be installed via pip.
    - 'python-pip'

###############################################################################
# Kolla-ansible inventory configuration.

# Full custom seed inventory contents.
#kolla_seed_inventory_custom:

# Custom overcloud inventory containing a mapping from top level groups to
# hosts.
#kolla_overcloud_inventory_custom_top_level:

# Custom overcloud inventory containing a mapping from components to top level
# groups.
#kolla_overcloud_inventory_custom_components:

# Custom overcloud inventory containing a mapping from services to components.
#kolla_overcloud_inventory_custom_services:

# Full custom overcloud inventory contents. By default this will be the
# concatenation of the top level, component, and service inventories.
#kolla_overcloud_inventory_custom:

# Dict mapping from kolla-ansible groups to kayobe groups and variables. Each
# item is a dict with the following items:
# * groups: A list of kayobe ansible groups to map to this kolla-ansible group.
# * vars: A dict mapping variable names to values for hosts in this
#         kolla-ansible group.
#kolla_overcloud_inventory_top_level_group_map:

# List of names of top level kolla-ansible groups. Any of these groups which
# have no hosts mapped to them will be provided with an empty group definition.
#kolla_overcloud_inventory_kolla_top_level_groups:

###############################################################################
# Kolla-ansible configuration.

# Virtualenv directory where Kolla-ansible's ansible modules will execute
# remotely on the target nodes. If None, no virtualenv will be used.
#kolla_ansible_target_venv:

# Whether TLS is enabled for the external API endpoints.
#kolla_enable_tls_external:
# Whether debug logging is enabled.
#kolla_openstack_logging_debug:

# Upper constraints file for installation of Kolla.
#kolla_upper_constraints_file:

# User account to use for Kolla SSH access.
#kolla_ansible_user:

# Primary group of Kolla SSH user.
#kolla_ansible_group:

# Whether to use privilege escalation for all operations performed via Kolla
# Ansible.
#kolla_ansible_become:

###############################################################################
# Kolla feature flag configuration.

#kolla_enable_aodh:
#kolla_enable_barbican:
#kolla_enable_blazar:
#kolla_enable_cadf_notifications:
#kolla_enable_ceilometer:
kolla_enable_central_logging: True
kolla_enable_ceph: False
#kolla_enable_ceph_mds:
#kolla_enable_ceph_nfs:
#kolla_enable_ceph_rgw:
kolla_enable_cinder: True
#kolla_enable_cinder_backend_hnas_iscsi:
#kolla_enable_cinder_backend_hnas_nfs:
#kolla_enable_cinder_backend_iscsi:
#kolla_enable_cinder_backend_lvm:
#kolla_enable_cinder_backend_nfs:
#kolla_enable_cinder_backend_zfssa_iscsi:
#kolla_enable_cloudkitty:
#kolla_enable_congress:
#kolla_enable_designate:
#kolla_enable_etcd:
#kolla_enable_fluentd:
#kolla_enable_freezer:
#kolla_enable_gnocchi:
kolla_enable_grafana: True
#kolla_enable_haproxy:
kolla_enable_heat: True
kolla_enable_horizon: True
#kolla_enable_influxdb:
kolla_enable_ironic: False
#kolla_enable_ironic_ipxe:
#kolla_enable_ironic_pxe_uefi:
#kolla_enable_iscsid:
#kolla_enable_karbor:
#kolla_enable_kuryr:
kolla_enable_magnum: True
kolla_enable_manila: True
#kolla_enable_manila_backend_generic:
#kolla_enable_manila_backend_hnas:
kolla_enable_manila_backend_cephfs_native: True
kolla_enable_manila_backend_cephfs_nfs: True
#kolla_enable_mistral:
#kolla_enable_monasca:
#kolla_enable_mongodb:
#kolla_enable_multipathd:
#kolla_enable_murano:
kolla_enable_neutron_agent_ha: True
#kolla_enable_neutron_bgp_dragent:
#kolla_enable_neutron_dvr:
#kolla_enable_neutron_fwaas:
#kolla_enable_neutron_lbaas:
kolla_enable_neutron_provider_networks: True
#kolla_enable_neutron_qos:
#kolla_enable_neutron_segments:
#kolla_enable_neutron_sriov:
#kolla_enable_neutron_vpnaas:
#kolla_enable_nova_serialconsole_proxy:
#kolla_enable_octavia:
#kolla_enable_osprofiler:
#kolla_enable_panko:
kolla_enable_prometheus: True
#kolla_enable_qdrouterd:
#kolla_enable_rally:
#kolla_enable_sahara:
#kolla_enable_searchlight:
#kolla_enable_senlin:
#kolla_enable_skydive:
#kolla_enable_solum:
#kolla_enable_storm:
#kolla_enable_swift:
#kolla_enable_tacker:
#kolla_enable_telegraf:
#kolla_enable_tempest:
#kolla_enable_trove:
#kolla_enable_vitrage:
#kolla_enable_vmtp:
#kolla_enable_watcher:
#kolla_enable_zun:

###############################################################################
# Passwords and credentials.

# Dictionary containing default custom passwords to add or override in the
# Kolla passwords file.
#kolla_ansible_default_custom_passwords:

# Dictionary containing custom passwords to add or override in the Kolla
# passwords file.
#kolla_ansible_custom_passwords:

###############################################################################
# TLS certificate bundle management

# Optionally copy a TLS certificate bundle into place.
#
# When enabled, this will copy the contents of kolla_tls_cert into place for
# use by HAproxy.
#
# Note that this should be formatted as a literal style block scalar.
old_kolla_external_fqdn_cacert: /etc/kolla/certificates/haproxy-ca.crt

old_kolla_tls_cert: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33316437626433343163623335303430636566373830663238616532346564343036616136326461
          6264313535333062323131646162383337613238303936340a626338653137646662613935636139
          34613465353930313065323839366566623638633032303865633065626666663061616230613462
          3032616566396363390a393735656536343437353237383364336539346562303337623065316630
          39633536646565643335303439623065353738633061613335366436373464303966306365656563
          64366534643434666465333338373839323266393161366238386134336364356331643034656161
          32623461343237663564313334626338303532353063316165643832313937306137303933323937
          65623961303937353738373439363865633132343331303632393031616562313865336435323266
          32303861383437326636313963653936633766363432363665343634333230386139376366653633
          36393866316438666337333837653234306231633764323664623930386466366663313534366138
          32636438626539323864666534356537353836306638373636313264343434353532303665316462
          64303435643531646637376261386537303066313362346137303234643135386435333465313835
          32306635346432663164396633363062376666313838633235636237376235396366313536346231
          34306264666262363638666437663566323230326666666635383333343930393036643932356436
          30373137643937316261373539313133396163396562666366646334356237643962356539323030
          61643334356665303666363161303933303430613031633965636561613163353332356137326432
          35653666646366396566626464326639646335663363346264613337383834306136643762346165
          63626631326235666230373465363932376533636366613930336133663063353634346639313863
          32383637303635666133333439323566353233616565333634653632346634353363363165616263
          39383636633337353163316235653538393232643538343634366361623861623465613964656432
          61643061666632303735346661356435663931306637346137663933383933386563616631663437
          37663762363134626234323764656338373633373661633838356332353735383436646639386635
          65373633666663316364383636343537623730343165393039396230306565666263313065613438
          64346663636334626530336661383537353061363436356632343362616133306461656430316437
          64623764663838393237333837663236336239633065376638626233643333316235383332313864
          63376563633738343865363533373837393764356433613530656363313466393434396465616337
          38363866303630393630363966386438663531386231616538356364376161313832663139643336
          32623762663536383336663037633537623763373362306637396237343836656231616566643139
          39363339326135373430623237303730626264326133373666333537366666316235346533343432
          38633164353765356366353339646466323163323831353936353131646539366362336632643631
          62653235303535663865646565373430653736313764623263306262353831653163323837366232
          63383830386135343130313236313165653764326638626139366337653039643063383631376664
          32326566663932623232663638623039653734396563626437616234613438346161396466343562
          35346366333063376563303463356263316362343764396661633233313334383363663063333462
          61616262313230366564396262393333613663383433636566613030616337353930643561643732
          39616437323738333535633438333434643530643836323530623435363561646466663435323436
          35303637366333383537646464666332323065323864336332633836326234313563396138663764
          30636666616631623630303135363739373162373862656332613064643232613931653164663865
          32626632313234313032616233663434373737663434613531626134323263303431653164323661
          33636633623864326263346435376234373239396364653765323461636462326137393761636263
          32653435373030636430663434346137616164363639636164616163323866313231313932623263
          30633931393734353961313334663838623733633337643838643832663834313033316130323539
          65636232313533643935646330343133396333363839653431383361346330656636656535636537
          61333037376134323264373461373037633436356465303432343230633562623233343762353666
          61353262636235616666383864343331633836366631343462626539343866323363663334363735
          31643737363737613436656231653236363363323963633935313362383039633065326631626161
          36353336313036373262626238393531613735636461616465663731386234636534333562303233
          65616261353436346533353835333439336231376565646133643535336530316539303166396633
          61333631353733366562333932333234346332323166313532623132653964653235636362613061
          37363265393662663637656238353033323130306335343163383866653030346464376165363136
          38346232666233316364303038343139386237333662386637326233366439613466623530666132
          39376637303235383264323364643265316561613161323832373739636563383030363661326237
          63353236623532383765323333386637313931366139666430653530383261663436386332653162
          34623063313932383831353764343061313132323233313235663233643531613234336132336233
          35396132633436343333383961326639363036656465376366343131626161323162353135343563
          34666561373232393936646433303036663237623439313837656336333535666431333435343933
          64366233323366643636333464313437333264613832323062393331393432623138346338333538
          34643837373363356335313038366363636137656336363031396530306338316564336538623863
          61386338353663316264346361653439343136643634623036336334376366326639313731333333
          65343134313861643336626339313261373263656232323932326534326662396366363965343861
          34633738636538663863376233326239663837353232383738666435363234346466653735343761
          32383131333461623961393133383432373233313536303430376561666534626538653634363136
          39383638666630393866323838313938326632323131336238633266333862333636633963373338
          38616233663566353162363733383635373933633965333938663330643661346461653738386532
          38653338616537353065613033383937306261333137663562303835363935313830343037303363
          35306133666332373834636636643237313734393936623039393432636263623738643664613935
          37626466663263623963663061336161323632343134383637386361333263303730333437316437
          66333661613638386539386234323937353733353462633263636630643734643664653235326137
          62373738363735386562313733636236653436373632346636366432373464643139636139346363
          39373130303765633230323264643365623966333765656537323337376335636634653638653365
          34306536643865303838343036333562383535363032656435376435663635313334623463326636
          61623336323165643765313238616630353632623532643331353130323136376239373166373430
          66333765333437326365383734363061663761393030626131343562633563613635386335653230
          38336565366262613333306137356330663563663431306338396563633263376238616331363761
          62366661363838616233393338363633383665373937636166626235626231363262353536613331
          65613966383163383266636262663837383539316432393265666434346562646434653635343834
          61323564643938623166653337666331626564376463353837616630343236343634613564313736
          34333830353466336266313637393338373533613461303631393963303338386366313032663035
          35336638323162653636646265313939323166306333336231376530346164336635366132376438
          65666664643130323766646361306535333165316562363831313265363262313631373063626365
          39363731316132663732346361393032663339303533623232646136316363646136313238303761
          37303931373638303066323336653734363236363136343032313862353739363339343335343238
          34353764376139313762616332383164333838653831316239303937613934333764363061623565
          31363432626139633939373566616137623565663535323335323163636437356361643563356263
          32393534393535376564643463666531366163396264373563653234386239303839396465303564
          36383265326664616266663535633061353438636430303330396561613232646630663235333265
          37613232356537353763356162313866623166666332313134633638613639373532376132616666
          37363863613837376161326531366534626532323231336637356334663538383139623462346134
          35616330653930346238333237633963363262646533663736373836313433396536333565383666
          36356461386131333362656238306238626462386234346133646366616163623737353138643739
          61636130646539633362666239316366356136656333393461383163346332383061396164323533
          61373761636261363432646261653263616535366561336132323466386563623238623066623237
          32316233636435666335353033323864623464363837656461666238613834663963383039333234
          66353831653537653865363039386532306662663235363132366165386337666233636262363635
          32346439623965623866326462646434356230646665623764393865346261656664336236386131
          34373931356633383564383334623961343062376232323637333965636665386238373866326330
          61666131376438636333313235383134663965386362666362393465393233343437343266313864
          34616266646365313534323737363332313138653034323462653532373434313865363162356133
          34366134613831323961396130386266623162323939356233313135396434356430613461313931
          34373861623061643265393263336337346432396538376434333063656433353836386135333637
          30623535313238353263393365616265333234656635323161626661643961363034363134616635
          63653039316561633432646237336432646135306665613833633066623630613062356566376661
          34303933326164313036376635393333623161653931653461323330623261373866353330373435
          64303036636161663336366330643463323863323731636437383836636639636336323463393735
          66373435333763376132343732333230663438333037393664643036333962643164653139646363
          32333431393337303432613466633236376265633063636461383435393165313137633239306635
          37663830386165373536343065353534313733303032636332613038373239373230333462323233
          63366633643235656335356362613965363965323639303265343430303036613066363765636666
          30383862326531303130663239336433393365663133386262373730363231646466326135636266
          33663434323635363366643065396637353932376336386265366337326539396239653936363837
          34383962663230373666653432373331343133366535343164376238656335373236383037376133
          66383731633563336634626564363664653761653039356262313864653263636366303832303431
          66646430333234643866623462653339383463316232366662363538353530333265666338313635
          36626638656631613566666230303264393763363961656462396465316237326238363838653533
          34336234303933623062626134386436616631363164376239316437343164643330623639373063
          65336531633137623433623666363736353530373466316166623861616538336334376261633133
          39316261306335306330653332303931666532356464353532646335333930386137653432623339
          33633937316632393139646437623430613361366130613134613363643132333739653861303535
          30613832656631663533346664323337366465653536383264656434383831633839353966643562
          62373864336461666466363461353338393363313163353637653761323132303761663732303962
          36313833323235373236653366363038363566636338636461393064386137353962383663636366
          34316537663566643232346438373531613835393730376366353333663735643262393264306330
          35643764373563646233636364616630363965663133383832336338633835353233346139383431
          35646163616263383833653062383631646663356339306530663264653164326339383862633561
          34653765643338316336623430356239383535366431383035383763663930363163613932326466
          31653533333338386533643661653738316535373036366161346163366565313862343738616134
          62363131643066363737363430353231343535316162653832323562393234353664353564396137
          66633338303038626463663837653534373435343732356538643136333636303261643362343762
          38316462353434386462326338333764333737363835393263623134383235386331363038343734
          65353162386334393236343163303531353037336336313064313330336135613535336639643062
          32343331303566366561393264666134316464396165636465356562653534633333303737653435
          31383766343065313932613963386135613364333135623861613734623230373864623262643266
          38626164613262623138353165383866333430363164643038363863653766616133306433363737
          34323533646635316233303537343030623264323637336665663563346565333564623336343733
          36323139623530646639353537613466643562333534306164663332303934353366373066306464
          37663465343465383032636630616330663332623839633534396239393165383737353735616631
          36623438313666373861656234613732393566356237616137313964666530643534396462653964
          65323962313366366462616536356332323039346132663934323334356263343537313136386661
          32623562633438643432356534333364386435376364373664323061396230343162663332653230
          31633264666364363133363238653364366135626138393835383166653663623565646132386535
          32313362376536306338363939323266313264386363366661363835306262303839323431653438
          66313133393261653938663033356662666264366635636136316634373264366465326534643233
          66306431323039346335643137363030623861643461653535636437653863643566336437363136
          38383233333334303338623430396436623938613333363830383138616537353531633532383732
          31386134303663353138343363326537653638353431636566393664306637343561616361643161
          66386337613132333765303232383131663037353931376564316130343765623636363532633438
          64343132656334393535336536343663323431666464386263636361366634373338323363303536
          35366437633466663430

###############################################################################
# Dummy variable to allow Ansible to accept this file.
workaround_ansible_issue_8743: yes
